{% extends "timeline/layout.html" %}
{% load static %}

{% block content %}

   {% include "timeline/nav.html" %}

   <div class="page"></div>

   <div class="tl-container">
      <div class="posts-container">

         {% for post in images %}
            <div class="post-card">
               <div class="post-top">
                  <div class="avatar-sm">
                     <img src="{{ post.author.avatar.url }}" alt="">
                  </div>
                  <p>{{ post.author.user.username }}</p>
               </div>
               <div class="post-image">
                  <img src="{{ post.img.url }}" alt="">
               </div>
               <div class="post-icons">
                  <img src="{% static 'images/like.svg' %}" alt="">
               </div>
               <div class="post-likes">
                  <p>1 Like</p>
               </div>
               <div class="post-caption">
                  <p><span>{{ post.author.user.username }}</span>{{ post.caption }}</p>
               </div>
               <div class="post-comments">
                  {% if post.comment_set %}
                     {% for comment in post.comments_set  %}
                        <p><span>{{ comment.comment_author.user.username }}</span> {{ comment.comment }}</p>
                     {% endfor %}                    
                  {% endif %}

               </div>
               <div class="post-comment-field">
                  <form action="" method="POST">
                     {% csrf_token %}
                     {{ form.as_p }}
                     <button type="submit" hidden></button>
                  </form>
               </div>
            </div>
         {% endfor %}

      </div>
      <div class="sidebar">
         <div class="current-user">
               <div class="avatar-md">
                  <img src="{{ user.profile.avatar.url }}" alt="{{ user.first_name }}Avatar">
               </div>
               <div class='name'>
                  <h4>{{ user.username }}</h4>
                  <p>{{ user.first_name }} {{ user.last_name }}</p>
               </div>
         </div>
         <div class="post-btn">
            <button id="newpost"> + Add Post</button>
         </div>
      </div>

   </div>

   <div class="modal">
      <div class="new-post">
         <div class="form-container">
            <form action="" method="post" enctype="multipart/form-data">
               {% csrf_token %}
               {{ new_post.as_p }}
            </form>
            <button>Post</button>
         </div>
      </div>
   </div>
{% endblock content %}
